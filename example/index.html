<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Audio Danmaku Example</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
		<style>
			.bullet-player{
				width: 480px;
				height: 60px;
				margin: 50px auto auto auto;
				/*border: solid;*/
			}

			.play{background: url('http://www.alexkatz.me/codepen/images/play.png') ;}
			.pause{background: url('http://www.alexkatz.me/codepen/images/pause.png') ;}

			.play-btn{
			    height:60px; 
			    width: 60px;
			    border: none;
			    background-size: 50% 50%;
			    background-repeat: no-repeat;
			    background-position: center;
			    float:left;
			    outline:none;
			}
			
			.bullet-anchor {
				width: 2px;
				background-color: orange;
				top: 0;
				height: 100%;
			}

			.play-timeline{
				position: relative;
				width: 400px;
				height: 20px;
				margin-top: 20px;
				float: left;
				border-radius: 15px;
				background: rgba(0,0,0,.3);
			  
			}
			.play-runner{
				width: 18px;
				height: 18px;
				border-radius: 50%;
				margin-top: 1px;
				background: rgba(0, 0, 0,1);

			}

		</style>

	</head>
	<body>

		<audio class="audio-bullet" preload="true">
	  	<source src="Sleepmakeswaves - It's Dark, It's Cold, It's Winter.mp3">
			<!-- <source src="http://www.alexkatz.me/codepen/music/interlude.ogg"> -->
		</audio>
		<form class="bullet-player" id="tagging">
			<input type="text" class="bullet-input" />
			<button class="bullet-add-btn">Add</button>
			<div class="bullet-panel"></div>
		</form>
		<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
		<script src="../src/audiobullet.js"></script>
		
		<script>

			$(function(){


				$('.audio-bullet').on('audio:timeUpdate', function(e, obj) {

					// console.log(obj.currentTime);

				})

				$('.audio-bullet').on('bulletAdded', function(e, obj, board){

					// $('pre').text(arr);
					console.log(board);
					
				})

				$('.audio-bullet').on('hasBullet', function(e, arr){

					var $panel = $('.bullet-panel');
					$panel.empty();

					$.each(arr, function(){

						var $bullet = $('<p class="bullet"></p>');
						$bullet.text(this.uname + ": " + this.text);
						$panel.append($bullet);
					})
					
				})

				$('.audio-bullet').on('audio:change', function() {
					var $panel = $('.bullet-panel');
					$panel.empty();
				})

				$('#tagging').on('submit', function(){

					var uname = 'me';
					var obj = {};
					obj.uname = uname;
					obj.text = $('input').val();

					$('.audio-bullet').audiobullet('add', obj);
					$('input').val("");
					return false;

				})



			})


		</script>


	</body>
</html>






